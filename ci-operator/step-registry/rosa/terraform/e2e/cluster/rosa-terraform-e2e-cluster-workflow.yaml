workflow:
  as: rosa-terraform-e2e-cluster
  steps:
    env:
      TF_VARS: |
        ocm_environment = "staging"
        url = "https://api.stage.openshift.com"
        openshift_version = "4.13.1"
      POLARION_PROPERTIES: |
        targets:
          polarion:
            config:
              project: OSE
            processing:
              testsuite_properties:
                polarion-testrun-id: ''
                polarion-testrun-title: ''
                polarion-custom-subteam: ''
                polarion-custom-casecomponent: ''
                polarion-custom-pillar: ''
                polarion-custom-env_iaas_cloud_provider: ''
                polarion-custom-version: ''
                polarion-custom-products: ''
                polarion-custom-plannedin: ''
                polarion-custom-description: ''
                polarion-custom-trigger: ''
                polarion-custom-build: ''
                polarion-custom-tags: ''
      POLARION_STEP_RESULTS: ''
    post:
    - ref: rosa-terraform-e2e-tests-upload-polarion
    - ref: rosa-terraform-e2e-cluster-delete
    - ref: rosa-terraform-e2e-cluster-delete-account-roles
    pre:
    - ref: rosa-terraform-e2e-cluster-create-name
    - ref: rosa-terraform-e2e-cluster-create-account-roles
    - ref: rosa-terraform-e2e-cluster-create

  documentation: |-
    This workflow installs a ocm-rosa cluster via terraform provider.
    After finish testing, the cluster will be destroyed.
